{
  "name": "product-crud-mongoose",
  "version": "1.0.0",
  "main": "server.js",
  "type": "module",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "mongoose": "^8.0.0"
  }
}
import express from "express";
import mongoose from "mongoose";
import productRoutes from "./routes/productRoutes.js";

const app = express();
app.use(express.json());

// âœ… Replace with your MongoDB URL
const MONGO_URI = "mongodb://localhost:27017/productsDB";

mongoose
  .connect(MONGO_URI)
  .then(() => console.log("âœ… MongoDB Connected"))
  .catch((err) => console.error("âŒ DB Connection Failed", err));

app.use("/api/products", productRoutes);

const PORT = 5000;
app.listen(PORT, () => console.log(`ðŸš€ Server running on port ${PORT}`));
import mongoose from "mongoose";

const productSchema = new mongoose.Schema(
  {
    name: {
      type: String,
      required: true,
      trim: true,
    },
    price: {
      type: Number,
      required: true,
      min: [0, "Price cannot be negative"],
    },
    category: {
      type: String,
      default: "General",
    },
  },
  { timestamps: true }
);

const Product = mongoose.model("Product", productSchema);
export default Product;
import express from "express";
import Product from "../models/Product.js";

const router = express.Router();

// âœ… Create Product
router.post("/", async (req, res) => {
  try {
    const product = await Product.create(req.body);
    res.status(201).json({ message: "Product created", product });
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
});

// âœ… Get All Products
router.get("/", async (req, res) => {
  try {
    const products = await Product.find();
    res.json(products);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

// âœ… Update Product by ID
router.put("/:id", async (req, res) => {
  try {
    const product = await Product.findByIdAndUpdate(req.params.id, req.body, {
      new: true,
      runValidators: true,
    });
    if (!product) return res.status(404).json({ error: "Product not found" });

    res.json({ message: "Product updated", product });
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
});

// âœ… Delete Product by ID
router.delete("/:id", async (req, res) => {
  try {
    const product = await Product.findByIdAndDelete(req.params.id);
    if (!product) return res.status(404).json({ error: "Product not found" });

    res.json({ message: "Product deleted" });
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
});

export default router;
